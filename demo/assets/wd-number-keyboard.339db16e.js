import{d as e,r as t,q as l,g as a,h as o,o as s,c as d,w as n,a as r,n as u,v as y,m as i,e as c,F as p,b as m,t as f,i as x,p as k,u as b,f as w,z as h}from"./index-5dc556e1.js";import{n as _,b as v,a as g,l as B}from"./page-wraper.eeca02a0.js";import{u as K}from"./useTouch.e2699a73.js";const T=g(e({name:"wd-key",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{type:{default:""},text:{default:""},wider:{type:Boolean,default:!1},large:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["press"],setup(e,{emit:k}){const b=e,w=K(),h=t(!1),g=l((()=>`wd-key ${b.large?"wd-key--large":""} ${"delete"===b.type?"wd-key--delete":""} ${"close"===b.type?"wd-key--close":""}`));function B(e){w.touchStart(e),h.value=!0}function T(e){w.touchMove(e),w.direction.value&&(h.value=!1)}function C(){h.value&&(h.value=!1,k("press",b.text,b.type))}return(t,l)=>{const k=a(o("wd-loading"),_),w=a(o("wd-icon"),v),h=x;return s(),d(h,{class:u("wd-key-wrapper "+(e.wider?"wd-key-wrapper--wider":"")),onTouchstart:B,onTouchmove:T,onTouchend:C},{default:n((()=>[r(h,{class:u(y(g))},{default:n((()=>[b.loading?(s(),d(k,{key:0,"custom-class":"wd-key--loading-icon"})):i("v-if",!0),"delete"===e.type?(s(),c(p,{key:1},[e.text?(s(),c(p,{key:0},[m(f(e.text),1)],64)):(s(),d(w,{key:1,name:"keyboard-delete",size:"22px"}))],64)):"extra"===e.type?(s(),c(p,{key:2},[e.text?(s(),c(p,{key:0},[m(f(e.text),1)],64)):(s(),d(w,{key:1,name:"keyboard-collapse",size:"22px"}))],64)):(s(),c(p,{key:3},[m(f(e.text),1)],64))])),_:1},8,["class"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-bb40916d"]]),C=g(e({name:"wd-number-keyboard",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{visible:{type:Boolean,default:!1},modelValue:{default:""},title:null,mode:{default:"default"},zIndex:{default:100},maxlength:{default:1/0},showDeleteKey:{type:Boolean,default:!0},randomKeyOrder:{type:Boolean,default:!1},closeText:null,deleteText:null,closeButtonLoading:{type:Boolean,default:!1},modal:{type:Boolean,default:!1},hideOnClickOutside:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0},extraKey:{default:""},customStyle:{default:""},customClass:{default:""}},emits:["update:visible","input","close","delete","update:modelValue"],setup(e,{emit:_}){const v=e,g=t(v.visible);k((()=>v.visible),(e=>{g.value=e}));const K=l((()=>"custom"===v.mode?function(){const e=V(),t=Array.isArray(v.extraKey)?v.extraKey:[v.extraKey];1===t.length?e.push({text:0,wider:!0},{text:t[0],type:"extra"}):2===t.length&&e.push({text:t[0],type:"extra"},{text:0},{text:t[1],type:"extra"});return e}():[...V(),{text:v.extraKey,type:"extra"},{text:0},{text:v.showDeleteKey?v.deleteText:"",type:v.showDeleteKey?"delete":""}])),C=l((()=>v.closeText&&"default"===v.mode)),I=l((()=>v.title||C.value));function V(){const e=Array.from({length:9},((e,t)=>({text:t+1})));return v.randomKeyOrder?function(e){const t=[...e];for(let l=t.length-1;l>0;l--){const e=Math.floor(Math.random()*(l+1));[t[l],t[e]]=[t[e],t[l]]}return t}(e):e}const z=()=>{_("close"),_("update:visible",!1)},S=(e,t)=>{if(""===e&&"extra"===t)return z();const l=v.modelValue;"delete"===t?(_("delete"),_("update:modelValue",l.slice(0,l.length-1))):"close"===t?z():l.length<+v.maxlength&&(_("input",e),_("update:modelValue",l+e))};return(t,l)=>{const k=h,_=x,v=a(o("wd-popup"),B);return s(),d(v,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),position:"bottom","z-index":e.zIndex,"safe-area-inset-bottom":e.safeAreaInsetBottom,"modal-style":e.modal?"":"opacity: 0;",modal:e.hideOnClickOutside,lockScroll:e.lockScroll,onClickModal:z},{default:n((()=>[r(_,{class:u(`wd-number-keyboard ${e.customClass}`),style:b(e.customStyle)},{default:n((()=>[y(I)?(s(),d(_,{key:0,class:"wd-number-keyboard__header"},{default:n((()=>[r(k,{class:"wd-number-keyboard__title"},{default:n((()=>[m(f(e.title),1)])),_:1}),y(C)?(s(),d(_,{key:0,class:"wd-number-keyboard__close","hover-class":"wd-number-keyboard__close--hover",onClick:z},{default:n((()=>[r(k,null,{default:n((()=>[m(f(e.closeText),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1})):i("v-if",!0),r(_,{class:"wd-number-keyboard__body"},{default:n((()=>[r(_,{class:"wd-number-keyboard__keys"},{default:n((()=>[(s(!0),c(p,null,w(y(K),(e=>(s(),d(T,{key:e.text,text:e.text,type:e.type,wider:e.wider,onPress:S},null,8,["text","type","wider"])))),128))])),_:1}),"custom"===e.mode?(s(),d(_,{key:0,class:"wd-number-keyboard__sidebar"},{default:n((()=>[e.showDeleteKey?(s(),d(T,{key:0,large:"",text:e.deleteText,type:"delete",onPress:S},null,8,["text"])):i("v-if",!0),r(T,{large:"",text:e.closeText,type:"close",loading:e.closeButtonLoading,onPress:S},null,8,["text","loading"])])),_:1})):i("v-if",!0)])),_:1})])),_:1},8,["class","style"])])),_:1},8,["modelValue","z-index","safe-area-inset-bottom","modal-style","modal","lockScroll"])}}}),[["__scopeId","data-v-332a3f59"]]);export{C as _};
