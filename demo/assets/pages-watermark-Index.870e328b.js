import{d as e,p as a,r as t,ag as l,G as s,q as u,l as i,a5 as o,o as d,c as n,w as r,u as f,m as c,n as m,v as g,J as p,i as v,e as _,a as h,b as y,F as w,g as b,h as z}from"./index-5dc556e1.js";import{K as x,q as k,o as $,L as I,M as V,a as C,e as j,_ as S}from"./page-wraper.eeca02a0.js";import{_ as X}from"./wd-button.4cb1c8d4.js";import{_ as F}from"./demo-block.069a2303.js";import{_ as P}from"./wd-badge.8ed0d24f.js";import{_ as W}from"./wd-cell-group.3a7e748e.js";import"./useChildren.f9480853.js";const Y=C(e({name:"wd-watermark",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{content:{default:""},image:{default:""},imageHeight:{default:100},imageWidth:{default:100},gutterX:{default:0},gutterY:{default:0},width:{default:100},height:{default:100},fullScreen:{type:Boolean,default:!0},color:{default:"#8c8c8c"},size:{default:14},fontStyle:{default:"normal"},fontWeight:{default:"normal"},fontFamily:{default:"PingFang SC"},rotate:{default:-25},zIndex:{default:1100},opacity:{default:.5}},setup(e){const _=e;a((()=>_),(()=>{j.value=!0,z.value=(_.height+_.gutterY)*b.value,C.value=(_.width+_.gutterX)*b.value,o((()=>{F()}))}),{deep:!0});const h=t(`water${x()}`),y=t(""),w=t(l("createOffscreenCanvas")&&Boolean(uni.createOffscreenCanvas)),b=t(s().pixelRatio),z=t((_.height+_.gutterY)*b.value),C=t((_.width+_.gutterX)*b.value),j=t(!0),S=u((()=>{let e="wd-watermark";return _.fullScreen&&(e=`${e} is-fullscreen`),e})),X=u((()=>{const e={opacity:_.opacity,backgroundSize:k(_.width+_.gutterX)};return y.value&&(e.backgroundImage=`url('${y.value}')`),$(e)}));function F(){j.value=!1;const{width:e,height:a,color:t,size:l,fontStyle:s,fontWeight:u,fontFamily:i,content:o,rotate:d,gutterX:n,gutterY:r,image:f,imageHeight:c,imageWidth:m}=_;!function(e,a,t,l,s,u,i,o,d,n,r,f,c,m){const g=(a+r)*b.value,p=(e+n)*b.value,v=e*b.value,_=a*b.value,h=l*b.value;!function(e,a,t,l,s,u,i,o,d,n,r,f,c,m){const g=document.createElement("canvas"),p=g.getContext("2d");if(g.setAttribute("width",`${a}px`),g.setAttribute("height",`${e}px`),p)if(f){!async function(e,a,t,l,s,u,i,o,d){e.translate(i/2,o/2),e.rotate(Math.PI/180*Number(u)),a.crossOrigin="anonymous",a.referrerPolicy="no-referrer",I(t)?a.src=t:a.src=V(t,{timestamp:`${(new Date).getTime()}`});a.onload=()=>{e.drawImage(a,-s*b.value/2,-l*b.value/2,s*b.value,l*b.value),e.restore(),y.value=d.toDataURL()}}(p,new Image,f,c,m,s,t,l,g)}else!function(e,a,t,l,s,u,i,o,d,n,r){e.textBaseline="middle",e.textAlign="center",e.translate(t/2,t/2),e.rotate(Math.PI/180*s),e.font=`${o} normal ${d} ${u}px/${l}px ${i}`,e.fillStyle=n,e.fillText(a,0,0),e.restore(),y.value=r.toDataURL()}(p,r,t,l,s,u,i,o,d,n,g);else console.error("无法获取canvas上下文，请确认当前环境是否支持canvas")}(g,p,v,_,d,h,i,s,u,t,o,f,c,m)}(e,a,t,l,s,u,i,o,d,n,r,f,c,m)}return i((()=>{F()})),(e,a)=>{const t=p,l=v;return d(),n(l,{class:m(g(S)),style:f(g(X))},{default:r((()=>[!w.value&&j.value?(d(),n(t,{key:0,type:"2d",style:f({height:z.value+"px",width:C.value+"px",visibility:"hidden"}),"canvas-id":h.value,id:h.value},null,8,["style","canvas-id","id"])):c("v-if",!0)])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-f6af3821"]]),A=C(e({__name:"Index",setup(e){const a=t(!1),l=u((()=>a.value?"https://wot-design-uni.cn/wot-design.png":""));function s(e){a.value=e}return(e,a)=>{const t=b(z("wd-watermark"),Y),u=b(z("wd-button"),X),i=b(z("demo-block"),F),o=b(z("wd-badge"),P),n=b(z("wd-cell"),j),f=b(z("wd-cell-group"),W),c=b(z("page-wraper"),S),m=v;return d(),_(w,null,[h(t,{image:g(l),width:130,height:140,"image-width":38,content:"wot-design-uni","image-height":38,opacity:.5},null,8,["image","opacity"]),h(m,null,{default:r((()=>[h(c,null,{default:r((()=>[h(i,{title:"基础用法"},{default:r((()=>[h(u,{onClick:a[0]||(a[0]=e=>s(!1)),plain:""},{default:r((()=>[y("文字水印")])),_:1}),h(u,{onClick:a[1]||(a[1]=e=>s(!0)),plain:""},{default:r((()=>[y("图片水印")])),_:1})])),_:1}),h(i,{title:"展示效果"},{default:r((()=>[h(o,{"custom-class":"badge",modelValue:200,max:99},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("评论")])),_:1})])),_:1}),h(o,{"custom-class":"badge",modelValue:200,max:10},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("回复")])),_:1})])),_:1})])),_:1}),h(i,{title:"局部水印"},{default:r((()=>[h(t,{opacity:.8,image:"https://wot-design-uni.cn/wot-design.png","image-width":38,"image-height":38,"full-screen":!1},null,8,["opacity"]),h(o,{"custom-class":"badge",modelValue:12},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("评论")])),_:1})])),_:1}),h(o,{"custom-class":"badge",modelValue:3,"bg-color":"pink"},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("回复")])),_:1})])),_:1}),h(o,{"custom-class":"badge",modelValue:1,type:"primary"},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("评论")])),_:1})])),_:1}),h(o,{"custom-class":"badge",modelValue:2,type:"warning"},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("回复")])),_:1})])),_:1}),h(o,{"custom-class":"badge",modelValue:1,type:"success"},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("评论")])),_:1})])),_:1}),h(o,{"custom-class":"badge",modelValue:2,type:"info"},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("回复")])),_:1})])),_:1}),h(f,{border:""},{default:r((()=>[h(n,{size:"large",title:"标题文字",value:"内容"}),h(n,{title:"标题文字",value:"内容",size:"large",icon:"setting","is-link":""}),h(n,{size:"large",title:"标题文字",label:"描述信息",value:"内容"}),h(n,{size:"large",title:"标题文字",value:"内容"}),h(n,{title:"标题文字",value:"内容",size:"large",icon:"setting","is-link":""}),h(n,{size:"large",title:"标题文字",label:"描述信息",value:"内容"})])),_:1})])),_:1}),h(i,{title:"展示效果"},{default:r((()=>[h(o,{"custom-class":"badge",modelValue:"new"},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("评论")])),_:1})])),_:1}),h(o,{"custom-class":"badge",modelValue:"hot"},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("回复")])),_:1})])),_:1})])),_:1}),h(i,{title:"展示效果"},{default:r((()=>[h(o,{"custom-class":"badge","is-dot":""},{default:r((()=>[y("数据查询")])),_:1}),h(o,{"custom-class":"badge","is-dot":""},{default:r((()=>[h(u,{round:!1,type:"info",size:"small"},{default:r((()=>[y("回复")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-4dfb452a"]]);export{A as default};
