import{d as e,r as a,p as t,a5 as l,N as o,g as s,h as r,o as n,c as i,w as c,y as d,a as u,b as p,t as f,n as b,u as w,m as x,x as m,a6 as _,i as v,a7 as y}from"./index-5dc556e1.js";import{g as k,b as h,a as g,_ as $}from"./page-wraper.eeca02a0.js";import{_ as C}from"./demo-block.069a2303.js";const j=g(e({name:"wd-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},text:null,type:{default:"warning"},scrollable:{type:Boolean,default:!0},delay:{default:1},speed:{default:50},closable:{type:Boolean,default:!1},wrapable:{type:Boolean,default:!1},prefix:null,color:null,backgroundColor:null},emits:["close"],setup(e,{emit:y}){const g=e,$=".wd-notice-bar__wrap",C=".wd-notice-bar__content";a(!0);const j=a(0),B=a(0),I=a(!0);a(0);const T=a(""),z=a(""),{proxy:D}=m();function G(){const{type:e,wrapable:a,scrollable:t}=g;let l=[];e&&l.push(`is-${e}`),!a&&!t&&l.push("wd-notice-bar--ellipse"),a&&!t&&l.push("wd-notice-bar--wrap"),z.value=l.join(" ")}function H(){I.value=!1,y("close")}function N(e,a,t){const l=_({duration:e,delay:a}).translateX(t);return l.step(),l.export()}function P(){T.value=N(0,0,j.value);const e=setTimeout((()=>{T.value=N((j.value+B.value)/g.speed*1e3,0,-B.value),clearTimeout(e)}),20)}return t([()=>g.type,()=>g.scrollable,()=>g.wrapable],(()=>{G()}),{deep:!0,immediate:!0}),t([()=>g.text],(()=>{l((()=>{Promise.all([k($,!1,D),k(C,!1,D)]).then((e=>{const[a,t]=e;if(!(a&&t&&a.width&&t.width))return;const l=a.width,o=t.width;g.scrollable&&o>l&&(T.value=N(o/g.speed*1e3,1e3*g.delay,-o),j.value=l,B.value=o)}))}))}),{deep:!0,immediate:!0}),o((()=>{G()})),(a,t)=>{const l=s(r("wd-icon"),h),o=v;return I.value?(n(),i(o,{key:0,class:b(`wd-notice-bar ${e.customClass} ${z.value}`),style:w(`color: ${e.color}; background: ${e.backgroundColor};`)},{default:c((()=>[e.prefix?(n(),i(l,{key:0,"custom-class":"wd-notice-bar__prefix",size:"18px",name:e.prefix},null,8,["name"])):d(a.$slots,"prefix",{key:1},void 0,!0),u(o,{class:"wd-notice-bar__wrap"},{default:c((()=>[u(o,{class:"wd-notice-bar__content",animation:T.value,onTransitionend:P},{default:c((()=>[p(f(e.text)+" ",1),d(a.$slots,"default",{},void 0,!0)])),_:3},8,["animation"])])),_:3}),e.closable?(n(),i(l,{key:2,"custom-class":"wd-notice-bar__suffix",size:"18px",name:"close-bold",onClick:H})):d(a.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):x("v-if",!0)}}}),[["__scopeId","data-v-0e2e238c"]]);const B=g({},[["render",function(e,a){const t=s(r("wd-notice-bar"),j),l=s(r("demo-block"),C),o=s(r("wd-icon"),h),d=s(r("page-wraper"),$);return n(),i(d,null,{default:c((()=>[u(l,{title:"基本用法"},{default:c((()=>[u(t,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),u(l,{title:"类型修改"},{default:c((()=>[u(t,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),u(t,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),u(l,{title:"禁止滚动"},{default:c((()=>[u(t,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),u(l,{title:"插槽"},{default:c((()=>[u(t,{scrollable:!1},{prefix:c((()=>[u(o,{"custom-class":"prefix",name:"warn-bold"},{default:c((()=>[p("占位符")])),_:1})])),suffix:c((()=>[y("div",{style:{color:"#4d80f0"}},"查看")])),default:c((()=>[p(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),u(l,{title:"可关闭的"},{default:c((()=>[u(t,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),u(l,{title:"多行展示"},{default:c((()=>[u(t,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),u(l,{title:"自定义颜色"},{default:c((()=>[u(t,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1})])),_:1})}],["__scopeId","data-v-3d5cc5c1"]]);export{B as default};
