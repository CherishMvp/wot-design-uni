import{d as e,r as a,p as l,q as u,l as t,o as s,c as d,w as n,n as i,b as o,t as r,m as v,a as c,u as m,v as w,x as f,i as h}from"./index-5dc556e1.js";import{i as b,g as p,h as g,a as _}from"./page-wraper.eeca02a0.js";import{u as y}from"./useTouch.e2699a73.js";const x=_(e({name:"wd-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{customMinClass:{default:""},customMaxClass:{default:""},customClass:{default:""},hideMinMax:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},inactiveColor:{default:"#e5e5e5"},activeColor:{default:""},max:{default:100},min:{default:0},step:{default:1},modelValue:{default:0}},emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{emit:_}){const x=e,M={startValue:0,deltaX:0,newValue:0},V=y(),$=y(),C=a(!1),T=a("width: 0; height: 3px"),k=a("3px"),j=a(0),L=a(0),B=a(0),S=a(0),X=a(0),A=a(0),I=a(0),N=a(0),O=a(0),q=a(100),E=a(0),G=a(1);l((()=>x.max),(e=>{e<0?(q.value=100,console.warn("[wot design] warning(wd-slider): max value must be greater than 0")):e<=x.min?(q.value=x.min,E.value=e,console.warn("[wot design] warning(wd-slider): max value must be greater than min value")):q.value=e}),{deep:!0,immediate:!0}),l((()=>x.min),(e=>{e<0?(E.value=0,console.warn("[wot design] warning(wd-slider): min value must be greater than 0")):e>=x.max?(E.value=x.max,q.value=e,console.warn("[wot design] warning(wd-slider): min value must be less than max value")):E.value=e}),{deep:!0,immediate:!0}),l((()=>x.step),(e=>{e<=0&&(G.value=1,console.warn("[wot design] warning(wd-slider): step must be greater than 0"))}),{deep:!0,immediate:!0}),l((()=>x.modelValue),((e,a)=>{if(null==e?(_("update:modelValue",a),console.warn("[wot design] warning(wd-slider): value can nott be null or undefined")):"Array"===le(e)&&2!==e.length?console.warn("[wot design] warning(wd-slider): value must be dyadic array"):"Number"!==le(e)&&"Array"!==le(e)&&(_("update:modelValue",a),console.warn("[wot design] warning(wd-slider): value must be dyadic array Or Number")),N.value=e,b(e)){if(function(e,a){if(!g(e)||!g(a))return!1;let l=0;return e.forEach(((e,u)=>{e===a[u]&&l++})),2===l}(e,a))return;C.value=!0,S.value<=B.value?(ee(e[0]),Z(e[1])):(ee(e[1]),Z(e[0]))}else{if(e===a)return;ee(e)}}),{deep:!0,immediate:!0});const{proxy:H}=f(),z=u((()=>`wd-slider ${x.hideLabel?"":"wd-slider__has-label"} ${x.disabled?"wd-slider--disabled":""} ${x.customClass}`)),D=u((()=>""+(x.inactiveColor?"background:"+x.inactiveColor:""))),F=u((()=>`${T.value};${x.activeColor?"background:"+x.activeColor:""}`)),J=u((()=>`left: ${S.value}%; visibility: ${x.disabled?"hidden":"show"};`)),K=u((()=>`left: ${B.value}%; visibility: ${x.disabled?"hidden":"show"}`));function P(e){const{disabled:a,modelValue:l}=x;a||(V.touchStart(e),I.value=b(l)?S.value<B.value?ue(l[0]):ue(l[1]):ue(l),_("dragstart",{value:N.value}))}function Q(e){const{disabled:a}=x;if(a)return;V.touchMove(e);const l=V.deltaX.value/X.value*(q.value-E.value);O.value=I.value+l,ee(O.value),_("dragmove",{value:N.value})}function R(){x.disabled||_("dragend",{value:N.value})}function U(e){if(x.disabled)return;const{modelValue:a}=x;$.touchStart(e),M.startValue=S.value<B.value?ue(a[1]):ue(a[0]),_("dragstart",{value:N.value})}function W(e){if(x.disabled)return;$.touchMove(e);const a=$.deltaX.value/X.value*(q.value-E.value);M.newValue=ue(M.startValue+a),Z(M.newValue),_("dragmove",{value:N.value})}function Y(){x.disabled||_("dragend",{value:N.value})}function Z(e){e=ue(e),L.value=e,_("update:modelValue",[Math.min(j.value,L.value),Math.max(j.value,L.value)]),B.value=te(e),ae()}function ee(e){const a=te(e=ue(e));C.value?(j.value=e,S.value=a,_("update:modelValue",[Math.min(j.value,L.value),Math.max(j.value,L.value)]),ae()):(_("update:modelValue",e),j.value=e,S.value=a,T.value=`width: ${a}%; height: ${k.value};`)}function ae(){const e=S.value<B.value?[S.value,B.value]:[B.value,S.value],a=`width: ${e[1]-e[0]}%; height: ${k.value}; left: ${e[0]}%`;N.value=j.value<L.value?[j.value,L.value]:[L.value,j.value],T.value=a}function le(e){return Object.prototype.toString.call(e).slice(8,-1)}function ue(e){return Math.round(Math.max(E.value,Math.min(e,q.value))/G.value)*G.value}function te(e){return(e-E.value)/(q.value-E.value)*100}return t((()=>{p(".wd-slider",!1,H).then((e=>{X.value=e.width,A.value=e.left}))})),(a,l)=>{const u=h;return s(),d(u,{class:i(w(z))},{default:n((()=>[e.hideMinMax?v("v-if",!0):(s(),d(u,{key:0,class:i(`wd-slider__label-min ${e.customMinClass}`)},{default:n((()=>[o(r(E.value),1)])),_:1},8,["class"])),c(u,{class:"wd-slider__bar-wrapper",style:m(w(D))},{default:n((()=>[c(u,{class:"wd-slider__bar",style:m(w(F))},null,8,["style"]),v(" 左边 "),c(u,{class:"wd-slider__button-wrapper",style:m(w(J)),onTouchstart:P,onTouchmove:Q,onTouchend:R,onTouchcancel:R},{default:n((()=>[e.hideLabel?v("v-if",!0):(s(),d(u,{key:0,class:"wd-slider__label"},{default:n((()=>[o(r(j.value),1)])),_:1})),c(u,{class:"wd-slider__button"})])),_:1},8,["style"]),v(" 右边 "),C.value?(s(),d(u,{key:0,class:"wd-slider__button-wrapper",style:m(w(K)),onTouchstart:U,onTouchmove:W,onTouchend:Y,onTouchcancel:Y},{default:n((()=>[e.hideLabel?v("v-if",!0):(s(),d(u,{key:0,class:"wd-slider__label"},{default:n((()=>[o(r(L.value),1)])),_:1})),c(u,{class:"wd-slider__button"})])),_:1},8,["style"])):v("v-if",!0)])),_:1},8,["style"]),e.hideMinMax?v("v-if",!0):(s(),d(u,{key:1,class:i(`wd-slider__label-max ${e.customMaxClass}`)},{default:n((()=>[o(r(q.value),1)])),_:1},8,["class"]))])),_:1},8,["class"])}}}),[["__scopeId","data-v-336ddab3"]]);export{x as _};
