import{d as e,r as s,q as l,l as t,M as a,o,c as r,w as i,m as c,a as u,n,y as d,v as h,u as p,x as f,i as v,a3 as w}from"./index-5dc556e1.js";import{q as _,o as g,a as m}from"./page-wraper.eeca02a0.js";const z=m(e({name:"wd-resize",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},customContainerClass:{default:""},customStyle:{default:""}},emits:["resize"],setup(e,{emit:m}){const z=e,y=s(0),x=s(0),C=s(0),b=s(0),S=s(0),$=s(0),H=s(0),W=l((()=>{const e={width:_($.value),height:_(S.value)};return`${g(e)};${z.customStyle}`}));let j=()=>{};const{proxy:q}=f();function E({lastWidth:e,lastHeight:s}){y.value=1e5+s,x.value=3*S.value+s,C.value=1e5+e,b.value=3*$.value+e}return t((()=>{a().in(q).select(".wd-resize__container").boundingClientRect().exec((([e])=>{let s=e.height,l=e.width;S.value=s,$.value=l,j=()=>{a().in(q).select(".wd-resize__container").boundingClientRect().exec((([e])=>{if(0==H.value++){const s={};["bottom","top","left","right","height","width"].forEach((l=>{s[l]=e[l]})),m("resize",s)}if(H.value<3)return;const t=e.height,a=e.width;S.value=t,$.value=a;const o=[];if(t!==s&&(s=t,o.push(1)),a!==l&&(l=a,o.push(1)),0!==o.length){const s={};["bottom","top","left","right","height","width"].forEach((l=>{s[l]=e[l]})),m("resize",s)}E({lastWidth:l,lastHeight:s})}))},E({lastWidth:l,lastHeight:s})}))})),(s,l)=>{const t=v,a=w;return o(),r(t,{class:n(`wd-resize ${e.customClass}`),style:p(h(W))},{default:i((()=>[c("插槽需要脱离父容器文档流，防止父容器固宽固高，进而导致插槽大小被被父容器限制"),u(t,{class:n(`wd-resize__container ${e.customContainerClass}`)},{default:i((()=>[c("被监听的插槽"),d(s.$slots,"default",{},void 0,!0),c("监听插槽变大"),u(a,{class:"wd-resize__wrapper","scroll-y":!0,"scroll-top":y.value,"scroll-x":!0,"scroll-left":C.value,onScroll:h(j)},{default:i((()=>[u(t,{class:"wd-resize__wrapper--placeholder",style:{height:"100000px",width:"100000px"}})])),_:1},8,["scroll-top","scroll-left","onScroll"]),c("监听插槽变小"),u(a,{class:"wd-resize__wrapper","scroll-y":!0,"scroll-top":x.value,"scroll-x":!0,"scroll-left":b.value,onScroll:h(j)},{default:i((()=>[u(t,{class:"wd-resize__wrapper--placeholder",style:{height:"250%",width:"250%"}})])),_:1},8,["scroll-top","scroll-left","onScroll"])])),_:3},8,["class"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-b9b6c9dc"]]);export{z as _};
