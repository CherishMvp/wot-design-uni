import{d as e,r as l,q as a,p as t,l as o,Q as s,o as u,c,w as d,a as i,v as r,u as n,m,y as v,e as p,F as f,b as h,t as V,n as _,I as y,J as k,i as w,z as x,x as b,g as z,h as g}from"./index-5dc556e1.js";import{K as C,q as F,o as I,N as L,a as S,_ as U}from"./page-wraper.eeca02a0.js";import{_ as j}from"./demo-block.069a2303.js";import{_ as M}from"./wd-button.4cb1c8d4.js";const P=S(e({name:"wd-circle",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{modelValue:{default:0},customClass:{default:""},customStyle:{default:""},size:{default:100},color:{default:"#4d80f0"},layerColor:{default:"#EBEEF5"},fill:null,speed:{default:50},text:null,strokeWidth:{default:10},strokeLinecap:{default:"round"},clockwise:{type:Boolean,default:!0}},setup(e){const z=e;const g=2*Math.PI,S=-Math.PI/2,U=1,j=l(""),M=l(1),P=l(0),W=l(null),T=l(C());let $=null;const E=a((()=>z.size*M.value)),G=a((()=>{const e={width:F(z.size),height:F(z.size)};return`${I(e)}; ${z.customStyle}`}));t((()=>z.modelValue),(()=>{!function(){if(z.speed<=0||z.speed>1e3)return void O(z.modelValue);H(),P.value=P.value||0;const e=()=>{W.value=setTimeout((()=>{P.value!==z.modelValue?(Math.abs(P.value-z.modelValue)<U?P.value=z.modelValue:P.value<z.modelValue?P.value+=U:P.value-=U,O(P.value),e()):H()}),1e3/z.speed)};e()}()}),{immediate:!0}),t((()=>z.size),(()=>{let e=setTimeout((()=>{O(P.value),clearTimeout(e)}),50)}),{immediate:!1}),t((()=>z.color),(()=>{O(P.value)}),{immediate:!1,deep:!0}),t((()=>z.layerColor),(()=>{O(P.value)}),{immediate:!1}),t((()=>z.strokeWidth),(()=>{O(P.value)}),{immediate:!1}),t((()=>z.clockwise),(()=>{O(P.value)}),{immediate:!1}),o((()=>{P.value=z.modelValue,O(P.value)})),s((()=>{H()}));const{proxy:q}=b();function B(e,l,a,t,o){const s=z.size*M.value;let u=z.strokeWidth*M.value;const c=s/2;o||(u/=2);const d=c-u/2;e.strokeStyle=l,e.setLineWidth(u),e.setLineCap(z.strokeLinecap),e.beginPath(),e.arc(c,c,d,a,t,!z.clockwise),e.stroke(),o&&(e.setLineWidth(u),e.setFillStyle(o),e.fill())}function O(e){const l=z.size*M.value;($||($=y(T.value,q)),Promise.resolve($)).then((a=>{a.clearRect(0,0,l,l),function(e){B(e,z.layerColor,0,g,z.fill)}(a);const t=(o=e,Math.min(Math.max(o,0),100));var o;0!==t?function(e,l){const a=z.size*M.value,t=g*(l/100),o=z.clockwise?S+t:3*Math.PI-(S+t);if(L(z.color)){const l=e.createLinearGradient(a,0,0,0);Object.keys(z.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>l.addColorStop(parseFloat(e)/100,z.color[e]))),j.value=l}else j.value=z.color;B(e,j.value,S,o)}(a,t):function(e){const l=z.size*M.value,a=z.strokeWidth*M.value,t=l/2;if(L(z.color)){const a=e.createLinearGradient(l,0,0,0);Object.keys(z.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>a.addColorStop(parseFloat(e)/100,z.color[e]))),j.value=a}else j.value=z.color;e.beginPath(),e.arc(t,a/4,a/4,0,g),e.setFillStyle(j.value),e.fill()}(a),a.draw()}))}function H(){W.value&&clearTimeout(W.value)}return(l,a)=>{const t=k,o=w,s=x;return u(),c(o,{class:_(`wd-circle ${e.customClass}`)},{default:d((()=>[i(t,{width:r(E),height:r(E),style:n(r(G)),id:T.value,"canvas-id":T.value},null,8,["width","height","style","id","canvas-id"]),e.text?(u(),p(f,{key:1},[m(" eslint-disable-next-line vue/valid-v-else "),i(s,{class:"wd-circle__text"},{default:d((()=>[h(V(e.text),1)])),_:1})],2112)):(u(),c(o,{key:0,class:"wd-circle__text"},{default:d((()=>[m(" 自定义提示内容 "),v(l.$slots,"default",{},void 0,!0)])),_:3}))])),_:3},8,["class"])}}}),[["__scopeId","data-v-9b364275"]]),W=S(e({__name:"Index",setup(e){const a=l(20),t={0:"red",100:"white"};function o(){a.value<100&&(a.value+=10)}function s(){a.value>0&&(a.value-=10)}return(e,l)=>{const r=z(g("wd-circle"),P),n=z(g("demo-block"),j),m=w,v=z(g("wd-button"),M),p=z(g("page-wraper"),U);return u(),c(m,{class:"circle"},{default:d((()=>[i(p,null,{default:d((()=>[i(n,{title:"基础用法"},{default:d((()=>[i(r,{"custom-class":"custom-circle",modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),text:a.value+"%"},null,8,["modelValue","text"])])),_:1}),i(n,{title:"样式定制"},{default:d((()=>[i(r,{"custom-class":"custom-circle",modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),"stroke-width":6,text:"宽度定制"},null,8,["modelValue"]),i(r,{"custom-class":"custom-circle",modelValue:a.value,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value=e),"layer-color":"#eee",color:"#ee0a24",text:"颜色定制"},null,8,["modelValue"]),i(r,{"custom-class":"custom-circle",modelValue:a.value,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value=e),color:t,text:"渐变色"},null,8,["modelValue"]),i(r,{"custom-class":"custom-circle",modelValue:a.value,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value=e),color:"#07c160",clockwise:!1,text:"逆时针"},null,8,["modelValue"]),i(r,{"custom-class":"custom-circle",modelValue:a.value,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value=e),size:120,text:"大小定制"},null,8,["modelValue"])])),_:1}),i(n,{title:"使用slot"},{default:d((()=>[i(r,{"custom-class":"custom-circle",modelValue:a.value,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value=e),"stroke-width":6},{default:d((()=>[i(m,{style:{color:"red"}},{default:d((()=>[h(V(a.value)+"%",1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),i(n,null,{default:d((()=>[i(v,{"custom-style":"margin-right:24rpx",type:"primary",size:"small",onClick:o},{default:d((()=>[h("增加")])),_:1}),i(v,{type:"error",size:"small",onClick:s},{default:d((()=>[h("减少")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-d552201c"]]);export{W as default};
