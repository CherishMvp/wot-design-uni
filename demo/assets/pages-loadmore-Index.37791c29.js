import{d as e,r as a,p as s,g as t,h as l,o,c as d,w as r,b as i,t as n,m as u,e as f,F as c,a as m,n as _,z as v,i as p,B as g,C as x,f as w,j as h}from"./index-5dc556e1.js";import{_ as T}from"./wd-divider.ef7fdf6d.js";import{b,n as k,a as y,_ as j}from"./page-wraper.eeca02a0.js";const C=y(e({name:"wd-loadmore",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},state:null,loadingText:{default:"正在努力加载中..."},finishedText:{default:"已加载完毕"},errorText:{default:""}},emits:["reload"],setup(e,{emit:g}){const x=e,w=a(""),h=a(null);function y(){"error"===x.state&&(h.value="loading",g("reload"))}return s((()=>x.state),(e=>{if(!e)return;const a=["loading","error","finished"];switch(-1===a.indexOf(e)&&console.error(`state must be one of ${a.toString()}`),e){case"loading":w.value=x.loadingText;break;case"error":w.value=x.errorText;break;case"finished":w.value=x.finishedText}}),{deep:!0,immediate:!0}),(a,s)=>{const g=t(l("wd-divider"),T),x=v,w=t(l("wd-icon"),b),h=t(l("wd-loading"),k),j=p;return o(),d(j,{class:_(["wd-loadmore",e.customClass]),onClick:y},{default:r((()=>["finished"===e.state?(o(),d(g,{key:0},{default:r((()=>[i(n(e.finishedText),1)])),_:1})):u("v-if",!0),"error"===e.state?(o(),f(c,{key:1},[e.errorText?(o(),f(c,{key:0},[i(n(e.errorText),1)],64)):(o(),f(c,{key:1},[m(x,{class:"wd-loadmore__text"},{default:r((()=>[i("加载失败")])),_:1}),m(x,{class:"wd-loadmore__text is-light"},{default:r((()=>[i("点击重试")])),_:1}),m(w,{name:"refresh",size:"16px","custom-class":"wd-loadmore__refresh"})],64))],64)):u("v-if",!0),"loading"===e.state?(o(),f(c,{key:2},[m(h,{size:"16px","custom-class":"wd-loadmore__loading"}),m(x,{class:"wd-loadmore__text"},{default:r((()=>[i(n(e.loadingText),1)])),_:1})],64)):u("v-if",!0)])),_:1},8,["class"])}}}),[["__scopeId","data-v-6be8f0fc"]]),I=y(e({__name:"Index",setup(e){const s=a("loading"),u=a(0),_=a(60);function v(){setTimeout((()=>{u.value=u.value+15,s.value="loading"}),200)}return g((()=>{45===u.value?s.value="error":u.value<_.value?v():u.value===_.value&&(s.value="finished")})),x((()=>{v()})),(e,a)=>{const _=h,g=p,x=t(l("wd-loadmore"),C),T=t(l("page-wraper"),j);return o(),d(T,null,{default:r((()=>[m(g,{class:"container"},{default:r((()=>[(o(!0),f(c,null,w(u.value,(e=>(o(),d(g,{key:e,class:"list-item"},{default:r((()=>[m(_,{src:"https://img10.360buyimg.com/jmadvertisement/jfs/t1/70325/36/14954/36690/5dcd3e3bEee5006e0/aed1ccf6d5ffc764.png"}),m(g,{class:"right"},{default:r((()=>[i("这是一条测试"+n(e+1),1)])),_:2},1024)])),_:2},1024)))),128)),m(x,{state:s.value,onReload:v},null,8,["state"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-7db38e08"]]);export{I as default};
