import{d as a,r as e,q as l,p as s,o as t,c as n,w as o,u as d,y as i,m as u,n as c,i as r,x as m,U as v,a5 as b,l as _,g as p,h as f,a as w,v as y,e as h,F as x,f as k,b as $,t as g,a3 as I}from"./index-5dc556e1.js";import{j as C,h as N,w as T,a as V,o as j,p as B,g as H,D as S,E as X,b as z}from"./page-wraper.eeca02a0.js";import{_ as A,a as E}from"./wd-sticky-box.7f9299c7.js";import{u as G}from"./useTouch.e2699a73.js";import{u as M}from"./useChildren.f9480853.js";import{d as W}from"./debounce.50c5a538.js";const q=Symbol("wd-tabs"),D=V(a({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{customClass:{default:""},name:null,title:null,disabled:{type:Boolean,default:!1}},setup(a,{expose:v}){const b=a,_=e(!1),p=e(!1),{proxy:f}=m(),{parent:w,index:y}=C(q),h=l((()=>N(w)?w.state.activeIndex:0));function x(a,e){_.value=a,p.value=e}return s((()=>b.name),(a=>{a&&"number"!==T(a)&&"string"!==T(a)?console.error("[wot design] error(wd-tab): the type of name should be number or string"):w&&function(a){const{name:e}=b;if(null==e||""===e)return;w&&w.children.forEach((l=>{l.$.uid!==a.$.uid&&l.name===e&&console.error(`The tab's bound value: ${e} has been used`)}))}(f)}),{deep:!0,immediate:!0}),s((()=>h.value),(a=>{a===y.value?x(!0,!0):x(_.value,!1)}),{deep:!0,immediate:!0}),v({setShow:x,painted:_}),(e,l)=>{const s=r;return t(),n(s,{class:c(`wd-tab ${a.customClass}`)},{default:o((()=>[_.value?(t(),n(s,{key:0,class:"wd-tab__body",style:d(p.value?"":"display: none;")},{default:o((()=>[i(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])):u("v-if",!0)])),_:3},8,["class"])}}}),[["__scopeId","data-v-20726c18"]]),F=V(a({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{customClass:{default:""},modelValue:{default:0},slidableNum:{default:6},mapNum:{default:10},sticky:{type:Boolean,default:!1},offsetTop:{default:0},swipeable:{type:Boolean,default:!1},lineWidth:{default:19},lineHeight:{default:3},color:null,inactiveColor:null,animated:{type:Boolean,default:!1},duration:{default:300}},emits:["change","disabled","click","update:modelValue"],setup(a,{expose:C,emit:V}){const D=a,F=".wd-tabs__nav-item",L=".wd-tabs__nav-container",P=v({activeIndex:0}),U=e(""),J=e(!1),K=e(0),O=e(!1),Q=e(!1),{children:R,linkChildren:Y}=M(q);Y({state:P});const{proxy:Z}=m(),aa=G(),ea=l((()=>R.map(((a,e)=>({disabled:a.disabled,title:a.title,name:N(a.name)?a.name:e}))))),la=l((()=>D.animated?j({left:-100*P.activeIndex+"%","transition-duration":D.duration+"ms","-webkit-transition-duration":D.duration+"ms"}):"")),sa=W((function(a=0,e=!1,l=!0){0!==ea.value.length&&(a=ra(a),ea.value[a].disabled||(P.activeIndex=a,l&&(na(!1===e),oa()),function(){if(!Q.value)return;ea.value[P.activeIndex].name!==D.modelValue&&(V("change",{index:P.activeIndex,name:ea.value[P.activeIndex].name}),V("update:modelValue",ea.value[P.activeIndex].name))}()))}),100,{leading:!1});function ta(){J.value?(O.value=!1,setTimeout((()=>{J.value=!1}),300)):(J.value=!0,setTimeout((()=>{O.value=!0}),100))}function na(a=!0){if(!Q.value)return;const{lineWidth:e,lineHeight:l}=D;H(F,!0,Z).then((s=>{const t=s[P.activeIndex],n=e;let o=s.slice(0,P.activeIndex).reduce(((a,e)=>a+e.width),0);o+=(t.width-n)/2;const d=`\n            height: ${l}px;\n            width: ${n}px;\n            transform: translateX(${o}px);\n            ${a?"transition: width 300ms ease, transform 300ms ease;":""}\n          `;U.value!==d&&(U.value=d)}))}function oa(){Q.value&&Promise.all([H(F,!0,Z),H(L,!1,Z)]).then((([a,e])=>{const l=a[P.activeIndex],s=a.slice(0,P.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-l.width)/2;s===K.value?K.value=s+Math.random()/1e4:K.value=s}))}function da(a){if(void 0===a)return;const{name:e,disabled:l}=ea.value[a];l?V("disabled",{index:a,name:e}):(J.value&&ta(),sa(a),V("click",{index:a,name:e}))}function ia(a){D.swipeable&&aa.touchStart(a)}function ua(a){D.swipeable&&aa.touchMove(a)}function ca(){if(!D.swipeable)return;const{direction:a,deltaX:e,offsetX:l}=aa;"horizontal"===a.value&&l.value>=50&&(e.value>0&&0!==P.activeIndex?sa(P.activeIndex-1):e.value<0&&P.activeIndex!==ea.value.length-1&&(sa(P.activeIndex+1),sa(P.activeIndex+1)))}function ra(a){if(S(a)&&a>=ea.value.length&&(console.error("[wot design] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),X(a)){const e=ea.value.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return s((()=>D.modelValue),(a=>{"number"!==T(a)&&"string"!==T(a)&&console.error("[wot design] error(wd-tabs): the type of value should be number or string"),""!==a&&void 0!==a||console.error("[wot design] error(wd-tabs): tabs's value cannot be null or undefined"),"number"==typeof a&&a<0&&console.error("[wot design] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),s((()=>D.modelValue),(a=>{const e=ra(a);sa(a,!1,e!==P.activeIndex)}),{immediate:!1,deep:!0}),s((()=>R.length),(()=>{Q.value&&b((()=>{sa(D.modelValue)}))})),s((()=>D.slidableNum),(a=>{B(a,"slidableNum")})),s((()=>D.mapNum),(a=>{B(a,"mapNum")})),_((()=>{Q.value=!0,b((()=>{sa(D.modelValue,!0)}))})),C({setActive:sa,scrollIntoView:oa,updateLineStyle:na,children:R}),(e,l)=>{const s=r,m=I,v=p(f("wd-icon"),z),b=p(f("wd-sticky"),A),_=p(f("wd-sticky-box"),E);return a.sticky?(t(),n(_,{key:0},{default:o((()=>[w(s,{class:c(`wd-tabs ${a.customClass} ${a.slidableNum<y(ea).length?"is-slide":""} ${a.mapNum<y(ea).length&&0!==a.mapNum?"is-map":""}`)},{default:o((()=>[w(b,{"offset-top":a.offsetTop},{default:o((()=>[u("头部导航容器"),w(s,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:o((()=>[w(s,{class:"wd-tabs__nav--wrap"},{default:o((()=>[w(m,{"scroll-x":a.slidableNum<y(ea).length,"scroll-with-animation":"","scroll-left":K.value},{default:o((()=>[w(s,{class:"wd-tabs__nav-container"},{default:o((()=>[u("nav列表"),(t(!0),h(x,null,k(y(ea),((e,l)=>(t(),n(s,{onClick:a=>da(l),key:l,class:c(`wd-tabs__nav-item  ${P.activeIndex===l?"is-active":""} ${e.disabled?"is-disabled":""}`),style:d(P.activeIndex===l?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:o((()=>[$(g(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),u("下划线"),w(s,{class:"wd-tabs__line",style:d(U.value)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),u("map表"),a.mapNum<y(ea).length&&0!==a.mapNum?(t(),n(s,{key:0,class:"wd-tabs__map"},{default:o((()=>[w(s,{class:c("wd-tabs__map-btn  "+(O.value?"is-open":"")),onClick:ta},{default:o((()=>[w(s,{class:c("wd-tabs__map-arrow  "+(O.value?"is-open":""))},{default:o((()=>[w(v,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),w(s,{class:"wd-tabs__map-header",style:d(`${J.value?"":"display:none;"}  ${O.value?"opacity:1;":""}`)},{default:o((()=>[$("全部")])),_:1},8,["style"]),w(s,{class:c("wd-tabs__map-body  "+(O.value?"is-open":"")),style:d(J.value?"":"display:none")},{default:o((()=>[(t(!0),h(x,null,k(y(ea),((e,l)=>(t(),n(s,{class:"wd-tabs__map-nav-item",key:l,onClick:a=>da(l)},{default:o((()=>[w(s,{class:c(`wd-tabs__map-nav-btn ${P.activeIndex===l?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:d(P.activeIndex===l?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:o((()=>[$(g(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):u("v-if",!0)])),_:1})])),_:1},8,["offset-top"]),u("标签页"),w(s,{class:"wd-tabs__container",onTouchstart:ia,onTouchmove:ua,onTouchend:ca,onTouchcancel:ca},{default:o((()=>[w(s,{class:c(["wd-tabs__body",a.animated?"is-animated":""]),style:d(y(la))},{default:o((()=>[i(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),u("map表的阴影浮层"),w(s,{class:"wd-tabs__mask",style:d(`${J.value?"":"display:none;"} ${O.value?"opacity:1;":""}`),onClick:ta},null,8,["style"])])),_:3},8,["class"])])),_:3})):(t(),n(s,{key:1,class:c(`wd-tabs  ${a.customClass} ${a.slidableNum<y(ea).length?"is-slide":""} ${a.mapNum<y(ea).length&&0!==a.mapNum?"is-map":""}`)},{default:o((()=>[u("头部导航容器"),w(s,{class:"wd-tabs__nav"},{default:o((()=>[w(s,{class:"wd-tabs__nav--wrap"},{default:o((()=>[w(m,{"scroll-x":a.slidableNum<y(ea).length,"scroll-with-animation":"","scroll-left":K.value},{default:o((()=>[w(s,{class:"wd-tabs__nav-container"},{default:o((()=>[u("nav列表"),(t(!0),h(x,null,k(y(ea),((e,l)=>(t(),n(s,{onClick:a=>da(l),key:l,class:c(`wd-tabs__nav-item ${P.activeIndex===l?"is-active":""} ${e.disabled?"is-disabled":""}`),style:d(P.activeIndex===l?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:o((()=>[$(g(e.title),1)])),_:2},1032,["onClick","class","style"])))),128)),u("下划线"),w(s,{class:"wd-tabs__line",style:d(U.value)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),u("map表"),a.mapNum<y(ea).length&&0!==a.mapNum?(t(),n(s,{key:0,class:"wd-tabs__map"},{default:o((()=>[w(s,{class:"wd-tabs__map-btn",onClick:ta},{default:o((()=>[w(s,{class:c("wd-tabs__map-arrow "+(O.value?"is-open":""))},{default:o((()=>[w(v,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),w(s,{class:"wd-tabs__map-header",style:d(`${J.value?"":"display:none;"}  ${O.value?"opacity:1;":""}`)},{default:o((()=>[$("全部")])),_:1},8,["style"]),w(s,{class:c("wd-tabs__map-body "+(O.value?"is-open":"")),style:d(J.value?"":"display:none")},{default:o((()=>[(t(!0),h(x,null,k(y(ea),((a,e)=>(t(),n(s,{class:"wd-tabs__map-nav-item",key:e,onClick:a=>da(e)},{default:o((()=>[w(s,{class:c(`wd-tabs__map-nav-btn ${P.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:o((()=>[$(g(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):u("v-if",!0)])),_:1}),u("标签页"),w(s,{class:"wd-tabs__container",onTouchstart:ia,onTouchmove:ua,onTouchend:ca,onTouchcancel:ca},{default:o((()=>[w(s,{class:c(["wd-tabs__body",a.animated?"is-animated":""]),style:d(y(la))},{default:o((()=>[i(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),u("map表的阴影浮层"),w(s,{class:"wd-tabs__mask",style:d(`${J.value?"":"display:none;"}  ${O.value?"opacity:1":""}`),onClick:ta},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-0b361670"]]);export{D as _,F as a};
