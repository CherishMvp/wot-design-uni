import{v as e,j as l,o as a,b as o,F as s,s as t,a as n}from"./page-wraper.eeca02a0.js";import{d as u,r as i,p as r,q as d,N as c,g as f,h as p,o as y,c as m,w as v,n as h,v as _,u as b,y as w,m as g,a as x,e as k,F as S,b as B,t as I,i as C,X as $,z as P}from"./index-5dc556e1.js";const V=n(u({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customInputClass:{default:""},customLabelClass:{default:""},customClass:{default:""},customStyle:{default:""},placeholder:{default:"请输入..."},placeholderStyle:null,placeholderClass:{default:""},cursorSpacing:{default:0},cursor:{default:-1},selectionStart:{default:-1},selectionEnd:{default:-1},adjustPosition:{type:Boolean,default:!0},holdKeyboard:{type:Boolean,default:!1},confirmType:{default:"done"},confirmHold:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},type:{default:"text"},maxlength:{default:-1},disabled:{type:Boolean,default:!1},alwaysEmbed:{type:Boolean,default:!1},alignRight:{type:Boolean,default:!1},modelValue:{default:""},showPassword:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},useSuffixSlot:{type:Boolean,default:!1},usePrefixSlot:{type:Boolean,default:!1},prefixIcon:null,suffixIcon:null,showWordLimit:{type:Boolean,default:!1},label:null,labelWidth:{default:"33%"},useLabelSlot:{type:Boolean,default:!1},size:null,error:{type:Boolean,default:!1},center:{type:Boolean,default:!1},noBorder:{type:Boolean,default:!1},required:{type:Boolean,default:!1},prop:null,rules:{default:()=>[]}},emits:["update:modelValue","clear","change","blur","focus","input","keyboardheightchange","confirm","linechange","clicksuffixicon","clickprefixicon","click"],setup(n,{emit:u}){const V=n,j=i(!1),L=i(!1),q=i(!1),W=i(!1),z=i(!1),E=i(""),F=e();r((()=>V.focus),(e=>{z.value=e}),{immediate:!0,deep:!0}),r((()=>V.modelValue),(e=>{const{disabled:l,readonly:a,clearable:o}=V;null==e&&(e="",console.warn("[wot-design] warning(wd-input): value can not be null or undefined.")),E.value=e,j.value=Boolean(o&&!l&&!a&&e)}),{immediate:!0,deep:!0});const{parent:H}=l(s),K=d((()=>H&&V.prop&&H.errorMessages&&H.errorMessages[V.prop]?H.errorMessages[V.prop]:"")),M=d((()=>{let e=!1;if(H&&H.props.rules){const l=H.props.rules;for(const a in l)Object.prototype.hasOwnProperty.call(l,a)&&a===V.prop&&Array.isArray(l[a])&&(e=l[a].some((e=>e.required)))}return V.required||V.rules.some((e=>e.required))||e})),A=d((()=>`wd-input  ${V.label||V.useLabelSlot?"is-cell":""} ${V.center?"is-center":""} ${F.border.value?"is-border":""} ${V.size?"is-"+V.size:""} ${V.error?"is-error":""} ${V.disabled?"is-disabled":""}  ${E.value&&String(E.value).length>0?"is-not-empty":""}  ${V.noBorder?"is-no-border":""} ${V.customClass}`)),O=d((()=>`wd-input__label ${V.customLabelClass} ${M.value?"is-required":""}`)),R=d((()=>`wd-input__placeholder  ${V.placeholderClass}`)),T=d((()=>V.labelWidth?a({"min-width":V.labelWidth,"max-width":V.labelWidth}):""));function G(){q.value=!q.value}function N(){E.value="",t().then((()=>t())).then((()=>t())).then((()=>{z.value=!0,u("clear"),u("change",{value:""}),u("update:modelValue",E.value)}))}function U({detail:e}){z.value=!1,u("change",{value:E.value}),u("update:modelValue",E.value),u("blur",{value:E.value})}function X({detail:e}){W.value?W.value=!1:(z.value=!0,u("focus",e))}function D(){u("update:modelValue",E.value),u("input",E.value)}function J(e){u("keyboardheightchange",e.detail)}function Q({detail:e}){u("confirm",e)}function Y(){u("clicksuffixicon")}function Z(){u("clickprefixicon")}function ee(e){u("click",e)}return c((()=>{!function(){const{disabled:e,readonly:l,clearable:a,maxlength:o,showWordLimit:s}=V;let t="";s&&o&&E.value.toString().length>o&&(t=E.value.toString().substring(0,o));j.value=Boolean(!e&&!l&&a&&E.value),L.value=Boolean(!e&&!l&&o&&s),E.value=t||E.value,u("update:modelValue",E.value)}()})),(e,l)=>{const a=f(p("wd-icon"),o),s=C,t=$,u=P;return y(),m(s,{class:h(_(A)),style:b(n.customStyle),onClick:ee},{default:v((()=>[n.label||n.useLabelSlot?(y(),m(s,{key:0,class:h(_(O)),style:b(_(T))},{default:v((()=>[n.prefixIcon||n.usePrefixSlot?(y(),m(s,{key:0,class:"wd-input__prefix"},{default:v((()=>[n.prefixIcon&&!n.usePrefixSlot?(y(),m(a,{key:0,"custom-class":"wd-input__icon",name:n.prefixIcon,onClick:Z},null,8,["name"])):w(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):g("v-if",!0),x(s,{class:"wd-input__label-inner"},{default:v((()=>[n.label?(y(),k(S,{key:0},[B(I(n.label),1)],64)):w(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):g("v-if",!0),g(" 输入域 "),x(s,{class:"wd-input__body"},{default:v((()=>[x(s,{class:"wd-input__value"},{default:v((()=>[!n.prefixIcon&&!n.usePrefixSlot||n.label?g("v-if",!0):(y(),m(s,{key:0,class:"wd-input__prefix"},{default:v((()=>[n.prefixIcon?(y(),m(a,{key:0,"custom-class":"wd-input__icon",name:n.prefixIcon,onClick:Z},null,8,["name"])):g("v-if",!0),w(e.$slots,"prefix",{},void 0,!0)])),_:3})),x(t,{class:h(["wd-input__inner",n.prefixIcon?"wd-input__inner--prefix":"",L.value?"wd-input__inner--count":"",n.alignRight?"is-align-right":"",n.customInputClass]),type:n.type,password:n.showPassword&&!q.value,modelValue:E.value,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value=e),placeholder:n.placeholder,disabled:n.disabled,maxlength:n.maxlength,focus:z.value,"confirm-type":n.confirmType,"confirm-hold":n.confirmHold,cursor:n.cursor,"cursor-spacing":n.cursorSpacing,"placeholder-style":n.placeholderStyle,"selection-start":n.selectionStart,"selection-end":n.selectionEnd,"adjust-position":n.adjustPosition,"hold-keyboard":n.holdKeyboard,"always-embed":n.alwaysEmbed,"placeholder-class":_(R),onInput:D,onFocus:X,onBlur:U,onConfirm:Q,onKeyboardheightchange:J},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class"]),n.readonly?(y(),m(s,{key:1,class:"wd-input__readonly-mask"})):g("v-if",!0),j.value||n.showPassword||n.suffixIcon||L.value||n.useSuffixSlot?(y(),m(s,{key:2,class:"wd-input__suffix"},{default:v((()=>[j.value?(y(),m(a,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:N})):g("v-if",!0),n.showPassword?(y(),m(a,{key:1,"custom-class":"wd-input__icon",name:q.value?"view":"eye-close",onClick:G},null,8,["name"])):g("v-if",!0),L.value?(y(),m(s,{key:2,class:"wd-input__count"},{default:v((()=>[x(u,{class:h([E.value&&String(E.value).length>0?"wd-input__count-current":"",String(E.value).length>n.maxlength?"is-error":""])},{default:v((()=>[B(I(String(E.value).length),1)])),_:1},8,["class"]),B(" /"+I(n.maxlength),1)])),_:1})):g("v-if",!0),n.suffixIcon?(y(),m(a,{key:3,"custom-class":"wd-input__icon",name:n.suffixIcon,onClick:Y},null,8,["name"])):g("v-if",!0),w(e.$slots,"suffix",{},void 0,!0)])),_:3})):g("v-if",!0)])),_:3}),_(K)?(y(),m(s,{key:0,class:"wd-input__error-message"},{default:v((()=>[B(I(_(K)),1)])),_:1})):g("v-if",!0)])),_:3})])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-d288679f"]]);export{V as _};
