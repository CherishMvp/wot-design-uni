import{H as e,h as t,a as s,c as a,d as o,_ as l}from"./page-wraper.eeca02a0.js";import{r as n,q as u,Y as i,d as c,p as r,o as m,c as d,w as f,y as p,v as h,e as v,F as w,b as S,t as _,n as y,u as g,i as H,a as k,a7 as b,g as D,h as x}from"./index-5dc556e1.js";import{_ as M}from"./demo-block.069a2303.js";import{_ as j,a as C}from"./wd-grid.15c647d7.js";import"./wd-badge.8ed0d24f.js";import"./useChildren.f9480853.js";import"./debounce.50c5a538.js";const F=1e3,I=60*F,A=60*I,$=24*A;function q(e){return requestAnimationFrame(e)}function B(e){let s,a,o=null;const l=n(e.time),c=u((()=>{return{total:e=l.value,days:Math.floor(e/$),hours:Math.floor(e%$/A),minutes:Math.floor(e%A/I),seconds:Math.floor(e%I/F),milliseconds:Math.floor(e%F)};var e})),r=()=>{a=!1,cancelAnimationFrame(o)},m=()=>Math.max(s-Date.now(),0),d=s=>{l.value=s,t(e.onChange)&&e.onChange(c.value),0===s&&(r(),t(e.onFinish)&&e.onFinish())},f=()=>{o=q((()=>{a&&(d(m()),l.value>0&&f())}))},p=()=>{o=q((()=>{if(a){const s=m();e=s,t=l.value,(Math.floor(e/1e3)!==Math.floor(t/1e3)||0===s)&&d(s),l.value>0&&p()}var e,t}))};return i(r),{start:()=>{a||(s=Date.now()+l.value,a=!0,e.millisecond?f():p())},pause:r,reset:(t=e.time)=>{r(),l.value=t},current:c}}const G=s(c({name:"wd-count-down",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{time:null,millisecond:{type:Boolean,default:!1},format:{default:"HH:mm:ss"},autoStart:{type:Boolean,default:!0},customClass:{default:""},customStyle:null},emits:["change","finish"],setup(t,{expose:s,emit:a}){const o=t,{start:l,pause:n,reset:i,current:c}=B({time:o.time,millisecond:o.millisecond,onChange:e=>a("change",e),onFinish:()=>a("finish")}),k=u((()=>function(t,s){const{days:a}=s;let{hours:o,minutes:l,seconds:n,milliseconds:u}=s;if(t.includes("DD")?t=t.replace("DD",e(a)):o+=24*a,t.includes("HH")?t=t.replace("HH",e(o)):l+=60*o,t.includes("mm")?t=t.replace("mm",e(l)):n+=60*l,t.includes("ss")?t=t.replace("ss",e(n)):u+=1e3*n,t.includes("S")){const s=e(u,3);t=t.includes("SSS")?t.replace("SSS",s):t.includes("SS")?t.replace("SS",s.slice(0,2)):t.replace("S",s.charAt(0))}return t}(o.format,c.value))),b=()=>{i(o.time),o.autoStart&&l()};return r((()=>o.time),b,{immediate:!0}),s({start:l,pause:n,reset:b}),(e,s)=>{const a=H;return m(),d(a,{class:y(`wd-count-down ${t.customClass}`),style:g(t.customStyle)},{default:f((()=>[e.$slots.default?p(e.$slots,"default",{key:0,current:h(c)},void 0,!0):(m(),v(w,{key:1},[S(_(h(k)),1)],64))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-62a86773"]]),O=s(c({__name:"Index",setup(e){const{show:t}=a(),s=n(108e6),u=n(null),i=()=>{u.value.start()},c=()=>{u.value.pause()},r=()=>{u.value.reset()},p=()=>t("倒计时结束");return(e,t)=>{const a=D(x("wd-toast"),o),n=D(x("wd-count-down"),G),h=D(x("demo-block"),M),v=D(x("wd-grid-item"),j),w=D(x("wd-grid"),C),S=D(x("page-wraper"),l);return m(),d(S,null,{default:f((()=>[k(a),k(h,{title:"基本用法"},{default:f((()=>[k(n,{time:s.value},null,8,["time"])])),_:1}),k(h,{title:"自定义格式"},{default:f((()=>[k(n,{time:s.value,format:"DD 天 HH 时 mm 分 ss 秒"},null,8,["time"])])),_:1}),k(h,{title:"毫秒级渲染"},{default:f((()=>[k(n,{time:s.value,millisecond:"",format:"HH:mm:ss:SS"},null,8,["time"])])),_:1}),k(h,{title:"自定义样式"},{default:f((()=>[k(n,{time:s.value},{default:f((({current:e})=>[b("span",{class:"custom-count-down"},_(e.hours),1),b("span",{class:"custom-count-down-colon"},":"),b("span",{class:"custom-count-down"},_(e.minutes),1),b("span",{class:"custom-count-down-colon"},":"),b("span",{class:"custom-count-down"},_(e.seconds),1)])),_:1},8,["time"])])),_:1}),k(h,{title:"手动控制"},{default:f((()=>[k(n,{ref_key:"countDown",ref:u,time:3e3,millisecond:"","auto-start":!1,format:"ss:SSS",onFinish:p},null,512),k(w,{clickable:"",border:""},{default:f((()=>[k(v,{text:"开始",icon:"play-circle-stroke",onItemclick:i}),k(v,{text:"暂停",icon:"pause-circle",onItemclick:c}),k(v,{text:"重置",icon:"refresh",onItemclick:r})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-aa320b6d"]]);export{O as default};
