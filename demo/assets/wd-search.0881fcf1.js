import{o as e,s as a,b as l,a as s}from"./page-wraper.eeca02a0.js";import{d as u,r as t,p as c,l as o,q as d,g as n,h as i,o as r,c as f,w as h,m as v,a as p,y as m,u as _,v as y,b as w,t as x,e as b,F as C,n as g,z as k,i as B,X as V}from"./index-5dc556e1.js";const S=s(u({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{userSuffixSlot:{type:Boolean,default:!1},placeholder:{default:"搜索"},cancelTxt:{default:"取消"},light:{type:Boolean,default:!1},hideCancel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{default:-1},modelValue:{default:""},placeholderLeft:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},focusWhenClear:{type:Boolean,default:!1},customClass:{default:""},customStyle:{default:""}},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(s,{emit:u}){const S=s,$=t(!1),z=t(!1),L=t(""),I=t(!0),W=t(!1);c((()=>S.modelValue),(e=>{L.value=e,e&&(z.value=!0)}),{immediate:!0}),c((()=>S.focus),(e=>{if(e){if(S.disabled)return;q()}})),o((()=>{S.focus&&q()}));const j=d((()=>`wd-search  ${S.light?"is-light":""}  ${S.hideCancel?"is-without-cancel":""} ${S.customClass}`)),F=d((()=>{const a={display:""===L.value&&I.value?"flex":"none"};return e(a)}));function T(e){z.value=e,a((()=>{$.value=e}))}function q(){S.disabled||a().then((()=>a())).then((()=>a())).then((()=>{I.value=!1,T(!0)}))}function G(e){L.value=e.detail.value,u("update:modelValue",e.detail.value),u("change",{value:e.detail.value})}function H(){L.value="",W.value=!0,S.focusWhenClear&&($.value=!1),a().then((()=>a())).then((()=>a())).then((()=>{S.focusWhenClear?(I.value=!1,T(!0)):(I.value=!0,T(!1)),u("clear"),u("change",{value:""}),u("update:modelValue","")}))}function U({detail:{value:e}}){u("search",{value:e})}function X(){W.value?W.value=!1:(I.value=!1,u("focus",{value:L.value}))}function A(){W.value||(I.value=!L.value,z.value=!I.value,$.value=!1,u("blur",{value:L.value}))}function D(){u("cancel",{value:L.value})}return(e,a)=>{const u=n(i("wd-icon"),l),t=k,c=B,o=V;return r(),f(c,{class:g(y(j)),style:_(s.customStyle)},{default:h((()=>[v("自定义label插槽"),v("搜索框主体"),p(c,{class:"wd-search__block"},{default:h((()=>[m(e.$slots,"prefix",{},void 0,!0),p(c,{class:"wd-search__field"},{default:h((()=>[s.placeholderLeft?v("v-if",!0):(r(),f(c,{key:0,style:_(y(F)),class:"wd-search__cover",onClick:q},{default:h((()=>[p(u,{name:"search",size:"18px","custom-class":"wd-search__search-icon"}),p(t,{class:"wd-search__placeholder-txt"},{default:h((()=>[w(x(s.placeholder||"搜索"),1)])),_:1})])),_:1},8,["style"])),v("icon:search"),z.value||L.value||s.placeholderLeft?(r(),f(u,{key:1,name:"search",size:"18px","custom-class":"wd-search__search-left-icon"})):v("v-if",!0),v("搜索框"),z.value||L.value||s.placeholderLeft?(r(),f(o,{key:2,placeholder:s.placeholder||"搜索","placeholder-class":"wd-search__placeholder-txt","confirm-type":"search",modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),class:"wd-search__input",onFocus:X,onInput:G,onBlur:A,onConfirm:U,disabled:s.disabled,maxlength:s.maxlength,focus:$.value},null,8,["placeholder","modelValue","disabled","maxlength","focus"])):v("v-if",!0),v("icon:clear"),L.value?(r(),f(u,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",size:"16px",onClick:H})):v("v-if",!0)])),_:1})])),_:3}),v("the button behind input,care for hideCancel without displaying"),s.hideCancel?v("v-if",!0):(r(),b(C,{key:0},[v("有插槽就不用默认的按钮了"),s.userSuffixSlot?m(e.$slots,"suffix",{key:0},void 0,!0):(r(),b(C,{key:1},[v("默认button"),p(c,{class:"wd-search__cancel",onClick:D},{default:h((()=>[w(x(s.cancelTxt||"取消"),1)])),_:1})],2112))],64))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-5f3de2be"]]);export{S as _};
