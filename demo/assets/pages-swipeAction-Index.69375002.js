import{g as a,a as e,c as t,d as l,e as s,_ as u}from"./page-wraper.eeca02a0.js";import{d as o,P as n,r as d,p as c,N as i,l as f,Y as r,o as b,e as _,m as p,a as v,w as k,u as m,y as h,n as g,T as w,F as y,x as C,i as $,c as V,b as T,v as x,g as j,h as z}from"./index-5dc556e1.js";import{p as I,r as Q,q as F,c as M,u as O}from"./clickoutside.4759e7ab.js";import{u as P}from"./useTouch.e2699a73.js";import{_ as q}from"./demo-block.069a2303.js";import{_ as B}from"./wd-button.4cb1c8d4.js";const D=e(o({name:"wd-swipe-action",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{customClass:null,beforeClose:null,disabled:{type:Boolean,default:!1},modelValue:{default:"close"}},emits:["click","update:modelValue"],setup(e,{expose:t,emit:l}){const s=e,u=n(F,null),o=d(""),V=d(0),T=d(0),x=d(!1),j=P(),{proxy:z}=C();function O(a,e){s.disabled||q().then((([t,l])=>{switch(a){case"close":if(0===T.value)return;S("value",e);break;case"left":B(t);break;case"right":B(-l)}}))}function q(){return Promise.all([a(".wd-swipe-action__left",!1,z).then((a=>a.width?a.width:0)),a(".wd-swipe-action__right",!1,z).then((a=>a.width?a.width:0))])}function B(a=0){const e=`translate3d(${a}px, 0, 0)`,t=x.value?"none":".6s cubic-bezier(0.18, 0.89, 0.32, 1)";o.value=`\n        -webkit-transform: ${e};\n        -webkit-transition: ${t};\n        transform: ${e};\n        transition: ${t};\n      `,T.value=a}function D(a){s.disabled||0===T.value||(S("click",a=a||"inside"),l("click",{value:a}))}function G(a){s.disabled||(V.value=T.value,j.touchStart(a),u&&u.closeOther?u.closeOther(z):M(z))}function H(a){if(s.disabled)return;if(j.touchMove(a),"vertical"===j.direction.value)return;a.preventDefault(),a.stopPropagation(),x.value=!0;const e=V.value+j.deltaX.value;q().then((([t,l])=>0===t&&e>0||0===l&&e<0?(B(0),G(a)):0!==t&&e>=t?(B(t),G(a)):0!==l&&-e>=l?(B(-l),G(a)):void B(e)))}function N(){if(s.disabled)return;const a=.3;x.value=!1,q().then((([e,t])=>{V.value<0&&T.value<0&&T.value-V.value<t*a?(B(-t),l("update:modelValue","right")):V.value>0&&T.value>0&&V.value-T.value<e*a?(B(e),l("update:modelValue","left")):t>0&&V.value>=0&&T.value<0&&Math.abs(T.value)>t*a?(B(-t),l("update:modelValue","right")):e>0&&V.value<=0&&T.value>0&&Math.abs(T.value)>e*a?(B(e),l("update:modelValue","left")):S("swipe")}))}function S(a,e){if("swipe"===a&&0===V.value)return B(0);"swipe"===a&&V.value>0?e="left":"swipe"===a&&V.value<0&&(e="right"),a&&e&&s.beforeClose&&s.beforeClose(a,e),B(0),"close"!==s.modelValue&&l("update:modelValue","close")}return c((()=>s.modelValue),((a,e)=>{O(a,e)}),{deep:!0}),i((()=>{u&&u.pushToQueue?u.pushToQueue(z):I(z),V.value=0,T.value=0,x.value=!1})),f((()=>{x.value=!0,O(s.modelValue),x.value=!1})),r((()=>{u&&u.removeFromQueue?u.removeFromQueue(z):Q(z)})),t({close:S}),(a,t)=>{const l=$;return b(),_(y,null,[p("注意阻止横向滑动的穿透：横向移动时阻止冒泡"),v(l,{class:g(`wd-swipe-action ${e.customClass}`),onClick:t[2]||(t[2]=w((a=>D()),["stop"])),onTouchstart:G,onTouchmove:H,onTouchend:N,onTouchcancel:N},{default:k((()=>[p("容器"),v(l,{class:"wd-swipe-action__wrapper",style:m(o.value)},{default:k((()=>[p("左侧操作"),v(l,{class:"wd-swipe-action__left",onClick:t[0]||(t[0]=a=>D("left"))},{default:k((()=>[h(a.$slots,"left",{},void 0,!0)])),_:3}),p("内容"),h(a.$slots,"default",{},void 0,!0),p("右侧操作"),v(l,{class:"wd-swipe-action__right",onClick:t[1]||(t[1]=a=>D("right"))},{default:k((()=>[h(a.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["style"])])),_:3},8,["class"])],2112)}}}),[["__scopeId","data-v-7ba00fb2"]]),G=e(o({__name:"Index",setup(a){const{closeOutside:e}=O(),o=t(),n=d("close"),c=(a,e)=>{"click"===a?o.show(`${a} ${e}导致滑动按钮关闭`):o.show(`${a}导致${e}滑动按钮关闭`)};function i(a){n.value=a}function f({value:a}){o.show(`点击${a}关闭操作按钮`)}function r(a){o.show(`点击了${a}`)}function _(){}return(a,t)=>{const o=j(z("wd-toast"),l),d=j(z("wd-cell"),s),p=$,m=j(z("wd-swipe-action"),D),h=j(z("demo-block"),q),g=j(z("wd-button"),B),y=j(z("page-wraper"),u);return b(),V(y,null,{default:k((()=>[v(o),v(p,{onClick:w(x(e),["stop"])},{default:k((()=>[v(h,{transparent:"",title:"基本用法"},{default:k((()=>[v(m,null,{right:k((()=>[v(p,{class:"action"},{default:k((()=>[v(p,{class:"button",style:{background:"#fa4350"},onClick:t[0]||(t[0]=a=>r("操作1"))},{default:k((()=>[T("操作1")])),_:1}),v(p,{class:"button",style:{background:"#f0883a"},onClick:t[1]||(t[1]=a=>r("操作2"))},{default:k((()=>[T("操作2")])),_:1}),v(p,{class:"button",style:{background:"#4d80f0"},onClick:t[2]||(t[2]=a=>r("操作3"))},{default:k((()=>[T("操作3")])),_:1})])),_:1})])),default:k((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),v(h,{transparent:"",title:"左右滑动"},{default:k((()=>[v(m,null,{left:k((()=>[v(p,{class:"action"},{default:k((()=>[v(p,{class:"button",style:{background:"#fa4350"}},{default:k((()=>[T("操作1")])),_:1}),v(p,{class:"button",style:{background:"#f0883a"}},{default:k((()=>[T("操作2")])),_:1}),v(p,{class:"button",style:{background:"#4d80f0"}},{default:k((()=>[T("操作3")])),_:1})])),_:1})])),right:k((()=>[v(p,{class:"action"},{default:k((()=>[v(p,{class:"button",style:{background:"#fa4350"}},{default:k((()=>[T("操作4")])),_:1}),v(p,{class:"button",style:{background:"#f0883a"}},{default:k((()=>[T("操作5")])),_:1}),v(p,{class:"button",style:{background:"#4d80f0"}},{default:k((()=>[T("操作6")])),_:1})])),_:1})])),default:k((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),v(h,{transparent:"",title:"切换按钮"},{default:k((()=>[v(m,{modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=a=>n.value=a),"before-close":c},{left:k((()=>[v(p,{class:"action"},{default:k((()=>[v(p,{class:"button",style:{background:"#fa4350"}},{default:k((()=>[T("操作1")])),_:1}),v(p,{class:"button",style:{background:"#f0883a"}},{default:k((()=>[T("操作2")])),_:1}),v(p,{class:"button",style:{background:"#4d80f0"}},{default:k((()=>[T("操作3")])),_:1})])),_:1})])),right:k((()=>[v(p,{class:"action"},{default:k((()=>[v(p,{class:"button",style:{background:"#fa4350"}},{default:k((()=>[T("操作4")])),_:1}),v(p,{class:"button",style:{background:"#f0883a"}},{default:k((()=>[T("操作5")])),_:1}),v(p,{class:"button",style:{background:"#4d80f0"}},{default:k((()=>[T("操作6")])),_:1})])),_:1})])),default:k((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1},8,["modelValue"])])),_:1}),v(p,{class:"button-group"},{default:k((()=>[v(p,{onClick:w(_,["stop"])},{default:k((()=>[v(g,{size:"small",onClick:t[4]||(t[4]=a=>i("left"))},{default:k((()=>[T("打开左边")])),_:1})])),_:1},8,["onClick"]),v(p,{onClick:w(_,["stop"])},{default:k((()=>[v(g,{size:"small",onClick:t[5]||(t[5]=a=>i("close"))},{default:k((()=>[T("关闭所有")])),_:1})])),_:1},8,["onClick"]),v(p,{onClick:w(_,["stop"])},{default:k((()=>[v(g,{size:"small",onClick:t[6]||(t[6]=a=>i("right"))},{default:k((()=>[T("打开右边")])),_:1})])),_:1},8,["onClick"])])),_:1}),v(h,{transparent:"",title:"点击事件"},{default:k((()=>[v(m,{onClick:f},{right:k((()=>[v(p,{class:"action"},{default:k((()=>[v(p,{class:"button",style:{background:"#fa4350"}},{default:k((()=>[T("操作1")])),_:1}),v(p,{class:"button",style:{background:"#f0883a"}},{default:k((()=>[T("操作2")])),_:1}),v(p,{class:"button",style:{background:"#4d80f0"}},{default:k((()=>[T("操作3")])),_:1})])),_:1})])),default:k((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),v(h,{transparent:"",title:"禁用滑动按钮"},{default:k((()=>[v(m,{disabled:""},{right:k((()=>[v(p,{class:"action"},{default:k((()=>[v(p,{class:"button",style:{background:"#fa4350"}},{default:k((()=>[T("操作1")])),_:1}),v(p,{class:"button",style:{background:"#f0883a"}},{default:k((()=>[T("操作2")])),_:1}),v(p,{class:"button",style:{background:"#4d80f0"}},{default:k((()=>[T("操作3")])),_:1})])),_:1})])),default:k((()=>[v(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-e84d9436"]]);export{G as default};
