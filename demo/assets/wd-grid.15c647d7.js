import{d as e,r as t,q as s,p as a,l as o,g as l,h as r,o as u,c as i,w as n,a as d,n as p,u as c,y as m,e as g,F as b,aa as f,b as v,t as h,ab as y,R as x,ac as $,S as k,i as w,m as C}from"./index-5dc556e1.js";import{j as _,h as I,b as T,a as S}from"./page-wraper.eeca02a0.js";import{_ as B}from"./wd-badge.8ed0d24f.js";import{u as q}from"./useChildren.f9480853.js";import{d as j}from"./debounce.50c5a538.js";const z=Symbol("wd-grid"),P=S(e({name:"wd-grid-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customText:{default:""},customIcon:{default:""},customClass:{default:""},icon:{default:""},iconSize:{default:"26px"},text:null,url:null,linkType:{default:"navigateTo"},useSlot:{type:Boolean,default:!1},useIconSlot:{type:Boolean,default:!1},useTextSlot:{type:Boolean,default:!1},isDot:{type:Boolean},type:null,value:null,max:null,badgeProps:null},emits:["itemclick"],setup(e,{expose:C,emit:S}){const q=e,j=t(""),P=t(""),D=t(""),G=t(0),H=t(!1),V=t(!0),{parent:A}=_(z),E=s((()=>I(A)&&I(A.children)?A.children.length:0));function F(){if(!A)return;const e=A.children,t=A.props.column?100/A.props.column+"%":100/e.length+"%",s=A.props.gutter?`padding:${A.props.gutter}px ${A.props.gutter}px 0 0; background-color: transparent;`:"",a=A.props.square?`background-color:transparent; padding-bottom: 0; padding-top:${t}`:"";P.value=A.props.gutter&&A.props.square?`right: ${A.props.gutter}px; bottom:${A.props.gutter}px;height: auto; background-color: ${A.props.bgColor}`:`background-color: ${A.props.bgColor}`,V.value=Boolean(A.props.border),H.value=Boolean(A.props.square),G.value=Number(A.props.gutter),j.value=`width: ${t}; ${a||s}`}function L(){if(A&&!A.props.clickable)return;const{url:e,linkType:t}=q;if(S("itemclick"),e)switch(t){case"navigateTo":k({url:e});break;case"reLaunch":$({url:e});break;case"redirectTo":x({url:e});break;case"switchTab":y({url:e});break;default:console.error(`[wot-design] warning(wd-grid-item): linkType can not be ${t}`)}}return a((()=>E.value),(()=>{if(!A)return;const e=A.props.column?100/A.props.column+"%":100/(E.value||1)+"%",t=A.props.gutter?`padding:${A.props.gutter}px ${A.props.gutter}px 0 0; background-color: transparent;`:"",s=A.props.square?`background-color:transparent; padding-bottom: 0; padding-top:${e}`:"";j.value=`width: ${e}; ${s||t}`}),{deep:!0,immediate:!0}),o((()=>{F()})),C({setiIemClass:function(e){D.value=e},itemClass:D,init:F}),(t,s)=>{const a=l(r("wd-icon"),T),o=l(r("wd-badge"),B),y=w;return u(),i(y,{class:p(`wd-grid-item ${V.value&&!G.value?D.value:""} ${e.customClass}`),onClick:L,style:c(j.value)},{default:n((()=>[d(y,{class:p(`wd-grid-item__content ${H.value?"is-square":""} ${V.value&&G.value>0?"is-round":""}`),style:c(P.value)},{default:n((()=>[e.useSlot?m(t.$slots,"default",{key:0},void 0,!0):(u(),g(b,{key:1},[d(y,{style:c("width:"+e.iconSize+"; height: "+e.iconSize),class:"wd-grid-item__wrapper"},{default:n((()=>[d(o,f({"custom-class":"badge","is-dot":e.isDot,modelValue:e.value,max:e.max,type:e.type},e.badgeProps),{default:n((()=>[e.useIconSlot?m(t.$slots,"icon",{key:0},void 0,!0):(u(),i(a,{key:1,name:e.icon,size:e.iconSize,"custom-class":e.customIcon},null,8,["name","size","custom-class"]))])),_:3},16,["is-dot","modelValue","max","type"])])),_:3},8,["style"]),e.useTextSlot?m(t.$slots,"text",{key:0},void 0,!0):(u(),i(y,{key:1,class:"wd-grid-item__text custom-text"},{default:n((()=>[v(h(e.text),1)])),_:1}))],64))])),_:3},8,["class","style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-69c0c004"]]),D=S(e({name:"wd-grid",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},clickable:{type:Boolean,default:!1},square:{type:Boolean,default:!1},column:null,border:{type:Boolean,default:!1},bgColor:{default:""},gutter:null},setup(e){const t=e,s=()=>new Promise((e=>setTimeout(e,20))),{linkChildren:o,children:l}=q(z);o({props:t}),a((()=>t.column),((e,t)=>{e!==t&&((!e||e<=0)&&console.error("The number of columns attribute value is invalid. The attribute must be greater than 0 and it is not recommended to use a larger value attribute."),t&&d())}),{deep:!0,immediate:!0}),a((()=>t.border),(e=>{e&&Promise.resolve().then(s).then((()=>{d()}))}),{deep:!0,immediate:!0}),a((()=>l),(()=>{r()}),{deep:!0});const r=j((()=>{d()}),50);function d(){l&&l.forEach(((e,s)=>{if(t.border){const{column:a}=t;if(a){const t=l.length-1===s||(s+1)%a==0,o=s+1<=a;o&&e.$.exposed.setiIemClass("is-first"),t&&e.$.exposed.setiIemClass("is-right"),!o&&e.$.exposed.setiIemClass("is-border")}else e.$.exposed.setiIemClass("is-first");l.length-1===s&&e.$.exposed.setiIemClass(e.$.exposed.itemClass.value+" is-last")}e.$.exposed.init()}))}return(t,s)=>{const a=w;return u(),i(a,{class:p(`wd-grid ${e.customClass}`),style:c(e.gutter?"padding-left:"+e.gutter+"px;padding-bottom:"+e.gutter+"px;":"")},{default:n((()=>[C(" 默认插入的 item "),m(t.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-e03c72dd"]]);export{P as _,D as a};
