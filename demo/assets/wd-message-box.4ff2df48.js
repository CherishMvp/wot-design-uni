import{r as e,O as a,d as l,q as t,P as o,p as s,g as u,h as n,o as i,c as r,w as c,a as d,n as p,v,m,b as f,t as _,e as w,F as y,y as x,i as b}from"./index-5dc556e1.js";import{_ as g}from"./wd-input.cca48b60.js";import{_ as h}from"./wd-button.4cb1c8d4.js";import{t as k,h as C,l as z,a as B}from"./page-wraper.eeca02a0.js";const V="__MESSAGE_OPTION__",T={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,confirmButtonText:"确定",cancelButtonText:"取消",msg:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"请输入",inputValidate:null,showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function E(l=""){const t=e(T);a(l?V+l:V,t);const o=e=>a=>{const l=k({type:e},"string"==typeof a?{title:a}:a);return"confirm"===l.type||"prompt"===l.type?l.showCancelButton=!0:l.showCancelButton=!1,s(l)},s=e=>new Promise(((a,l)=>{const o=k(T,"string"==typeof e?{title:e}:e);t.value=k(o,{show:!0,onConfirm:e=>{a(e)},onCancel:e=>{l(e)}})})),u=o("alert"),n=o("confirm"),i=o("prompt");return{show:s,alert:u,confirm:n,prompt:i,close:()=>{t.value={...T}}}}const I=B(l({name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{useSlot:{type:Boolean,default:!1},selector:{default:""},customClass:{default:""}},setup(a){const l=a,k=t((()=>`wd-message-box__container ${l.customClass}`)),B=t((()=>`wd-message-box__body ${M.value?"":"is-no-title"} ${"prompt"===q.value?"is-prompt":""}`)),E=l.selector?V+l.selector:V,I=o(E,e(T)),P=e("");let O=null,S=null;const j=e(!1),M=e(""),$=e(!1),G=e(!0),R=e(""),U=e(""),q=e("alert"),A=e("text"),F=e(""),H=e(""),N=e();let D=null;const J=e(""),K=e(!1),L=e(99),Q=e(!0);function W(e){if(("modal"!==e||G.value)&&("prompt"!==q.value||"confirm"!==e||function(){if(N.value&&!N.value.test(String(F.value)))return K.value=!0,!1;if("function"==typeof D){if(!D(F))return K.value=!0,!1}return K.value=!1,!0}()))switch(j.value=!1,e){case"confirm":O&&O({action:e,value:F.value});break;case"cancel":S&&S({action:e});break;default:S&&S({action:"modal"})}}function X(e){""!==e?F.value=e:K.value=!1}return s((()=>I.value),(e=>{var a;(a=e)&&(M.value=C(a.title)?a.title:M.value,$.value=C(a.showCancelButton)?a.showCancelButton:$.value,j.value=a.show,G.value=a.closeOnClickModal,R.value=a.confirmButtonText,U.value=a.cancelButtonText,P.value=a.msg,q.value=a.type,A.value=a.inputType,F.value=a.inputValue,H.value=a.inputPlaceholder,N.value=a.inputPattern,D=a.inputValidate,O=a.onConfirm,S=a.onCancel,J.value=a.inputError,K.value=a.showErr,L.value=a.zIndex,Q.value=a.lazyRender)}),{deep:!0,immediate:!0}),s((()=>j.value),(e=>{!1===e&&(K.value=!1)}),{deep:!0,immediate:!0}),(e,l)=>{const t=b,o=u(n("wd-input"),g),s=u(n("wd-button"),h),C=u(n("wd-popup"),z);return i(),r(t,null,{default:c((()=>[d(C,{transition:"zoom-in",modelValue:j.value,"onUpdate:modelValue":l[3]||(l[3]=e=>j.value=e),"close-on-click-modal":G.value,"lazy-render":Q.value,"custom-class":"wd-message-box",onClickModal:l[4]||(l[4]=e=>W("modal")),"z-index":L.value,duration:200},{default:c((()=>[d(t,{class:p(v(k))},{default:c((()=>[m("内容部分"),d(t,{class:p(v(B))},{default:c((()=>[m("公共title"),M.value?(i(),r(t,{key:0,class:"wd-message-box__title"},{default:c((()=>[f(_(M.value),1)])),_:1})):m("v-if",!0),m("其它类型"),d(t,{class:"wd-message-box__content"},{default:c((()=>[m("prompt类型"),"prompt"===q.value?(i(),w(y,{key:0},[m("输入框"),d(o,{modelValue:F.value,"onUpdate:modelValue":l[0]||(l[0]=e=>F.value=e),type:A.value,size:"large",placeholder:H.value||"请输入",onInput:X},null,8,["modelValue","type","placeholder"]),m("错误提示"),K.value?(i(),r(t,{key:0,class:"wd-message-box__input-error"},{default:c((()=>[f(_(J.value||"输入的数据不合法"),1)])),_:1})):m("v-if",!0)],64)):m("v-if",!0),m("使用插槽"),a.useSlot?x(e.$slots,"default",{key:1},void 0,!0):(i(),w(y,{key:2},[m("使用文本"),f(_(P.value),1)],64))])),_:3})])),_:3},8,["class"]),m("action按钮组合"),d(t,{class:p("wd-message-box__actions "+($.value?"wd-message-box__flex":"wd-message-box__block"))},{default:c((()=>[$.value?(i(),r(s,{key:0,type:"info",block:"","custom-style":"margin-right: 16px;",onClick:l[1]||(l[1]=e=>W("cancel"))},{default:c((()=>[f(_(U.value||"取消"),1)])),_:1})):m("v-if",!0),d(s,{block:"",onClick:l[2]||(l[2]=e=>W("confirm"))},{default:c((()=>[f(_(R.value||"确定"),1)])),_:1})])),_:1},8,["class"])])),_:3},8,["class"])])),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index"])])),_:3})}}}),[["__scopeId","data-v-9b11a498"]]);export{I as _,E as u};
