import{v as e,j as a,o as l,b as t,F as o,s,a as r}from"./page-wraper.eeca02a0.js";import{d as u,r as n,p as d,q as i,N as c,g as f,h as p,o as h,c as m,w as y,n as v,v as g,u as b,y as x,m as _,a as w,b as B,t as k,i as S,z as C,a2 as $}from"./index-5dc556e1.js";const V=r(u({name:"wd-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{placeholder:{default:"请输入..."},placeholderStyle:null,placeholderClass:{default:""},disabled:{type:Boolean,default:!1},maxlength:{default:-1},focus:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},cursorSpacing:{default:0},cursor:{default:-1},confirmType:{default:"done"},confirmHold:{type:Boolean,default:!1},showConfirmBar:{type:Boolean,default:!0},selectionStart:{default:-1},selectionEnd:{default:-1},adjustPosition:{type:Boolean,default:!0},disableDefaultPadding:{type:Boolean,default:!1},holdKeyboard:{type:Boolean,default:!1},modelValue:{default:""},showPassword:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},prefixIcon:null,usePrefixSlot:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},label:null,labelWidth:{default:"33%"},useLabelSlot:{type:Boolean,default:!1},size:null,error:{type:Boolean,default:!1},center:{type:Boolean,default:!1},noBorder:{type:Boolean,default:!1},required:{type:Boolean,default:!1},prop:null,rules:{default:()=>[]},customTextareaContainerClass:{default:""},customTextareaClass:{default:""},customLabelClass:{default:""},customClass:{default:""},customStyle:{default:""}},emits:["update:modelValue","clear","change","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(r,{emit:u}){const V=r,P=n(!1),j=n(!1),I=n(!1),L=n(!1),q=n(""),H=e();d((()=>V.focus),(e=>{L.value=e}),{immediate:!0,deep:!0}),d((()=>V.modelValue),(e=>{const{disabled:a,readonly:l,clearable:t}=V;null==e&&(e="",console.warn("[wot-design] warning(wd-textarea): value can not be null or undefined.")),q.value=e,P.value=Boolean(t&&!a&&!l&&e)}),{immediate:!0,deep:!0});const{parent:T}=a(o),W=i((()=>T&&V.prop&&T.errorMessages&&T.errorMessages[V.prop]?T.errorMessages[V.prop]:"")),z=i((()=>{let e=!1;if(T&&T.props.rules){const a=T.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===V.prop&&Array.isArray(a[l])&&(e=a[l].some((e=>e.required)))}return V.required||V.rules.some((e=>e.required))||e})),F=i((()=>`wd-textarea   ${V.label||V.useLabelSlot?"is-cell":""} ${V.center?"is-center":""} ${H.border.value?"is-border":""} ${V.size?"is-"+V.size:""} ${V.error?"is-error":""} ${V.disabled?"is-disabled":""} ${V.autoHeight?"is-auto-height":""} ${q.value&&String(q.value).length>0?"is-not-empty":""}  ${V.noBorder?"is-no-border":""} ${V.customClass}`)),K=i((()=>`wd-textarea__label ${V.customLabelClass} ${z.value?"is-required":""}`)),M=i((()=>`wd-textarea__placeholder  ${V.placeholderClass}`)),A=i((()=>V.labelWidth?l({"min-width":V.labelWidth,"max-width":V.labelWidth}):""));function D(){q.value="",s().then((()=>s())).then((()=>s())).then((()=>{L.value=!0,u("clear"),u("change",{value:""}),u("update:modelValue",q.value)}))}function E({detail:e}){L.value=!1,u("change",{value:q.value}),u("update:modelValue",q.value),u("blur",{value:q.value,cursor:e.cursor?e.cursor:null})}function O({detail:e}){I.value?I.value=!1:(L.value=!0,u("focus",e))}function G(){u("update:modelValue",q.value),u("input",q.value)}function N({detail:e}){u("keyboardheightchange",e)}function U({detail:e}){u("confirm",e)}function J({detail:e}){u("linechange",e)}function Q(){u("clickprefixicon")}function R(e){u("click",e)}return c((()=>{!function(){const{disabled:e,readonly:a,clearable:l,maxlength:t,showWordLimit:o}=V;let s="";o&&t&&q.value.toString().length>t&&(s=q.value.toString().substring(0,t));P.value=Boolean(!e&&!a&&l&&q.value),j.value=Boolean(!e&&!a&&t&&o),q.value=s||q.value,u("update:modelValue",q.value)}()})),(e,a)=>{const l=f(p("wd-icon"),t),o=S,s=C,u=$;return h(),m(o,{class:v(g(F)),style:b(r.customStyle),onClick:R},{default:y((()=>[r.label||r.useLabelSlot?(h(),m(o,{key:0,class:v(g(K)),style:b(g(A))},{default:y((()=>[r.prefixIcon||r.usePrefixSlot?(h(),m(o,{key:0,class:"wd-textarea__prefix"},{default:y((()=>[r.prefixIcon&&!r.usePrefixSlot?(h(),m(l,{key:0,"custom-class":"wd-textarea__icon",name:r.prefixIcon,onClick:Q},null,8,["name"])):x(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):_("v-if",!0),w(o,{class:"wd-textarea__label-inner"},{default:y((()=>[r.label?(h(),m(s,{key:0},{default:y((()=>[B(k(r.label),1)])),_:1})):x(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):_("v-if",!0),_(" 文本域 "),w(o,{class:v(`wd-textarea__value ${r.customTextareaContainerClass} ${j.value?"is-show-limit":""}`)},{default:y((()=>[w(u,{class:v(`wd-textarea__inner ${P.value?"is-suffix":""} ${r.customTextareaClass}`),modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),"show-count":!1,placeholder:r.placeholder,disabled:r.disabled,maxlength:r.maxlength,focus:L.value,"auto-focus":r.autoFocus,"placeholder-style":r.placeholderStyle,"placeholder-class":g(M),"auto-height":r.autoHeight,"cursor-spacing":r.cursorSpacing,fixed:r.fixed,cursor:r.cursor,"show-confirm-bar":r.showConfirmBar,"selection-start":r.selectionStart,"selection-end":r.selectionEnd,"adjust-position":r.adjustPosition,"hold-keyboard":r.holdKeyboard,"confirm-type":r.confirmType,"confirm-hold":r.confirmHold,"disable-default-padding":r.disableDefaultPadding,onInput:G,onFocus:O,onBlur:E,onConfirm:U,onLinechange:J,onKeyboardheightchange:N},null,8,["class","modelValue","placeholder","disabled","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding"]),g(W)?(h(),m(o,{key:0,class:"wd-textarea__error-message"},{default:y((()=>[B(k(g(W)),1)])),_:1})):_("v-if",!0),r.readonly?(h(),m(o,{key:1,class:"wd-textarea__readonly-mask"})):_("v-if",!0),w(o,{class:"wd-textarea__suffix"},{default:y((()=>[P.value?(h(),m(l,{key:0,"custom-class":"wd-textarea__clear",name:"error-fill",onClick:D})):_("v-if",!0),j.value?(h(),m(o,{key:1,class:"wd-textarea__count"},{default:y((()=>[w(s,{class:v([q.value&&String(q.value).length>0?"wd-textarea__count-current":"",String(q.value).length>parseInt(String(r.maxlength))?"is-error":""])},{default:y((()=>[B(k(String(q.value).length),1)])),_:1},8,["class"]),B(" /"+k(r.maxlength),1)])),_:1})):_("v-if",!0)])),_:1})])),_:1},8,["class"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-ef6fa135"]]);export{V as _};
