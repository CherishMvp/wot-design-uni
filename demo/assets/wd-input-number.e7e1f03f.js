import{w as e,b as a,a as t}from"./page-wraper.eeca02a0.js";import{d as l,r as u,p as n,g as i,h as s,o,c as d,w as r,a as p,n as c,T as m,u as f,m as b,i as v,X as w}from"./index-5dc556e1.js";import{d as h}from"./debounce.50c5a538.js";const _=t(l({name:"wd-input-number",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{customClass:{default:""},modelValue:null,min:{default:1},max:{default:Number.MAX_SAFE_INTEGER},step:{default:1},stepStrictly:{type:Boolean,default:!1},precision:{default:0},disabled:{type:Boolean,default:!1},disableInput:{type:Boolean,default:!1},disableMinus:{type:Boolean,default:!1},disablePlus:{type:Boolean,default:!1},withoutInput:{type:Boolean,default:!1},inputWidth:{default:36},allowNull:{type:Boolean,default:!1},placeholder:{default:""}},emits:["focus","blur","change","update:modelValue"],setup(t,{emit:l}){const _=t,y=u(!1),N=u(!1),x=u("");function M(e){const{disabled:a,min:t,max:l,step:u}=_;y.value=a||e<=t||V(e,-u)<t,N.value=a||e>=l||V(e,u)>l}function I(e){return Number(parseFloat(""+Math.round(e*Math.pow(10,_.precision))/Math.pow(10,_.precision)).toFixed(_.precision))}function B(e){const a=function(e){if(void 0===e)return 0;const a=e.toString(),t=a.indexOf(".");let l=0;return-1!==t&&(l=a.length-t-1),l}(_.step),t=Math.pow(10,a);return Math.round(e/_.step)*t*_.step/t}function g(a,t=!0){const l=e(a);!_.allowNull||"null"!==l&&"undefined"!==l&&""!==a?(_.stepStrictly&&(a=B(a)),!a&&0!==a||void 0===_.precision||(a=I(Number(a))),Number(a)>_.max&&(a=I(_.max)),Number(a)<_.min&&(a=I(_.min)),A(a,t)):A(a,t)}function V(e,a){if(e=Number(e),isNaN(e))return _.min;const t=Math.pow(10,_.precision);return I((e*t+a*t)/t)}function C(){if(y.value||_.disableMinus)return;A(V(x.value,-_.step))}function F(){if(N.value||_.disablePlus)return;A(V(x.value,_.step))}function S(e){A(e.detail.value||"")}function k(e){l("focus",e.detail)}function j(){const e=E(x.value);g(e),l("blur",{value:e})}function A(e,a=!0){x.value=e,a&&l("change",{value:e}),a&&l("update:modelValue",x.value)}function E(a){const t=e(a);return!_.allowNull||"null"!==t&&"undefined"!==t&&""!==a?(a=Number(a),isNaN(a)&&(a=_.min),_.stepStrictly&&(a=B(a)),void 0!==_.precision&&(a=a.toFixed(_.precision)),a):""}return n((()=>_.modelValue),(e=>{x.value=e,M(e)}),{immediate:!0,deep:!0}),n([()=>_.max,()=>_.min],(()=>{h((()=>{const e=E(x.value);g(e),M(e)}),30)()}),{immediate:!0,deep:!0}),n((()=>_.disabled),(e=>{y.value=e,N.value=e}),{immediate:!0,deep:!0}),(e,l)=>{const u=i(s("wd-icon"),a),n=v,h=w;return o(),d(n,{class:c(`wd-input-number ${t.customClass} ${t.disabled?"is-disabled":""} ${t.withoutInput?"is-without-input":""}`)},{default:r((()=>[p(n,{class:c("wd-input-number__action "+(y.value||t.disableMinus?"is-disabled":"")),onClick:C},{default:r((()=>[p(u,{name:"decrease","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"]),t.withoutInput?b("v-if",!0):(o(),d(n,{key:0,class:"wd-input-number__inner",onClick:l[1]||(l[1]=m((()=>{}),["stop"]))},{default:r((()=>[p(h,{class:"wd-input-number__input",style:f(""+(t.inputWidth?"width: "+t.inputWidth:"")),type:"digit",disabled:t.disabled||t.disableInput,modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value=e),placeholder:t.placeholder,onInput:S,onFocus:k,onBlur:j},null,8,["style","disabled","modelValue","placeholder"]),p(n,{class:"wd-input-number__input-border"})])),_:1})),p(n,{class:c("wd-input-number__action "+(N.value||t.disablePlus?"is-disabled":"")),onClick:F},{default:r((()=>[p(u,{name:"add","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-44b63041"]]);export{_};
